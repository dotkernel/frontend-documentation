{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"../../README.md","title":"Home"},{"location":"#readmemd","text":"","title":"../../README.md"},{"location":"v5/how-to/authorization/","text":"Authorization Guards The packages responsible for restricting access to certain parts of the application are dot-rbac-guard and dot-rbac . These packages work together to create an infrastructure that is customizable and diversified to manage user access to the platform by specifying the type of role the user has. The authorization.global.php file provides multiple configurations specifying multiple roles as well as the types of permissions to which these roles have access. //example of a flat RBAC model that specifies two types of roles as well as their permission 'roles' =&gt; [ 'admin' =&gt; [ 'permissions' =&gt; [ 'authenticated', 'edit', 'delete', //etc.. ] ], 'user' =&gt; [ 'permissions' =&gt; [ 'authenticated', //etc.. ] ] ] The authorization-guards.global.php file provides configuration to restrict access to certain actions based on the permissions defined in authorization.global.php so basically we have to add the permissions in the dot-rbac configuration file first to specify the action restriction permissions. // configuration example to restrict certain actions of some routes based on the permissions specified in the dot-rbac configuration file 'rules' =&gt; [ [ 'route' =&gt; 'account', 'actions' =&gt; [//list of actions to apply , or empty array for all actions 'unregister', 'avatar', 'details', 'changePassword' ], 'permissions' =&gt; ['authenticated'] ], [ 'route' =&gt; 'admin', 'actions' =&gt; [ 'deleteAccount' ], 'permissions' =&gt; [ 'delete' //list of roles to allow ] ] ]","title":"Configure Authorizations"},{"location":"v5/how-to/authorization/#authorization-guards","text":"The packages responsible for restricting access to certain parts of the application are dot-rbac-guard and dot-rbac . These packages work together to create an infrastructure that is customizable and diversified to manage user access to the platform by specifying the type of role the user has. The authorization.global.php file provides multiple configurations specifying multiple roles as well as the types of permissions to which these roles have access. //example of a flat RBAC model that specifies two types of roles as well as their permission 'roles' =&gt; [ 'admin' =&gt; [ 'permissions' =&gt; [ 'authenticated', 'edit', 'delete', //etc.. ] ], 'user' =&gt; [ 'permissions' =&gt; [ 'authenticated', //etc.. ] ] ] The authorization-guards.global.php file provides configuration to restrict access to certain actions based on the permissions defined in authorization.global.php so basically we have to add the permissions in the dot-rbac configuration file first to specify the action restriction permissions. // configuration example to restrict certain actions of some routes based on the permissions specified in the dot-rbac configuration file 'rules' =&gt; [ [ 'route' =&gt; 'account', 'actions' =&gt; [//list of actions to apply , or empty array for all actions 'unregister', 'avatar', 'details', 'changePassword' ], 'permissions' =&gt; ['authenticated'] ], [ 'route' =&gt; 'admin', 'actions' =&gt; [ 'deleteAccount' ], 'permissions' =&gt; [ 'delete' //list of roles to allow ] ] ]","title":"Authorization Guards"},{"location":"v5/how-to/creating-fixtures/","text":"Fixtures Fixtures are used to seed the database with initial values and should only be executed ONCE each, after migrating the database. Seeding the database is done with the help of our custom package dotkernel/dot-data-fixtures built on top of doctrine/data-fixtures . See below on how to use our CLI command for listing and executing Doctrine data fixtures. Working with fixtures You can find an example of a fixtures class in data/doctrine/fixtures/RoleLoader.php . To list all the available fixtures by order of execution run: php bin/doctrine fixtures:list To execute all fixtures run: php bin/doctrine fixtures:execute To execute a specific fixture, use its class name, like in this example: php bin/doctrine fixtures:execute --class=RoleLoader Fixtures can and should be ordered to ensure database consistency. More on ordering fixtures can be found here : https://www.doctrine-project.org/projects/doctrine-data-fixtures/en/latest/how-to/fixture-ordering.html#fixture-ordering","title":"Create Database Fixtures"},{"location":"v5/how-to/creating-fixtures/#fixtures","text":"Fixtures are used to seed the database with initial values and should only be executed ONCE each, after migrating the database. Seeding the database is done with the help of our custom package dotkernel/dot-data-fixtures built on top of doctrine/data-fixtures . See below on how to use our CLI command for listing and executing Doctrine data fixtures.","title":"Fixtures"},{"location":"v5/how-to/creating-fixtures/#working-with-fixtures","text":"You can find an example of a fixtures class in data/doctrine/fixtures/RoleLoader.php . To list all the available fixtures by order of execution run: php bin/doctrine fixtures:list To execute all fixtures run: php bin/doctrine fixtures:execute To execute a specific fixture, use its class name, like in this example: php bin/doctrine fixtures:execute --class=RoleLoader Fixtures can and should be ordered to ensure database consistency. More on ordering fixtures can be found here : https://www.doctrine-project.org/projects/doctrine-data-fixtures/en/latest/how-to/fixture-ordering.html#fixture-ordering","title":"Working with fixtures"},{"location":"v5/how-to/creating-migrations/","text":"Creating migrations Migrations are used to create and/or edit the database structure. To generate a new migration file, use this command: php vendor/bin/doctrine-migrations migrations:generate It creates a PHP file like this one /data/doctrine/migrations/Version20220606131835.php that can then be edited in the IDE. You can add new queries in: public function up - these are executed when the migration is run. public function down - these are optional queries that undo the above changes. Example This example creates a new column named test . Add this in public function up : $this-&gt;addSql('ALTER TABLE users ADD test VARCHAR(255) NOT NULL'); And its opposite in public function down : $this-&gt;addSql('ALTER TABLE users DROP test');","title":"Create Database Migrations"},{"location":"v5/how-to/creating-migrations/#creating-migrations","text":"Migrations are used to create and/or edit the database structure. To generate a new migration file, use this command: php vendor/bin/doctrine-migrations migrations:generate It creates a PHP file like this one /data/doctrine/migrations/Version20220606131835.php that can then be edited in the IDE. You can add new queries in: public function up - these are executed when the migration is run. public function down - these are optional queries that undo the above changes.","title":"Creating migrations"},{"location":"v5/how-to/creating-migrations/#example","text":"This example creates a new column named test . Add this in public function up : $this-&gt;addSql('ALTER TABLE users ADD test VARCHAR(255) NOT NULL'); And its opposite in public function down : $this-&gt;addSql('ALTER TABLE users DROP test');","title":"Example"},{"location":"v5/how-to/csrf/","text":"CSRF protection in forms A Cross-Site Request Forgery (CSRF) attack is a type of security vulnerability that tricks a user into performing actions on a web application in which they are authenticated, without their knowledge or consent. Web applications can protect users against these types of attacks by implementing CSRF tokens in their forms which are known only to the application that generated them and must be included when submitting forms. With each visit, a new CSRF token is added to the form so tokens are not reusable between forms. Failing to provide a valid CSRF token will result in a form validation error. Implement CSRF protection Implementing CSRF protection requires three steps: create new field using laminas/laminas-form 's CSRF element validate new field using laminas/laminas-session 's CSRF validator render field using laminas/laminas-form 's FormElement helper Create field Open the form's PHP class and append the following code to the method that initializes the fields (usually init ): $this-&gt;add(new \\Laminas\\Form\\Element\\Csrf('exampleCsrf', [ 'csrf_options' =&gt; [ 'timeout' =&gt; 3600, 'session' =&gt; new \\Laminas\\Session\\Container(), ], ])); You should use a relevant name instead of exampleCsrf that best describes the purpose of the field (example: forgotPasswordCsrf ). Validate field Open the InputFilter that validates the form fields and append the following code to the method that initializes the fields (usually init ): $csrf = new \\Laminas\\InputFilter\\Input('exampleCsrf'); $csrf-&gt;setRequired(true); $csrf-&gt;getFilterChain() -&gt;attachByName(\\Laminas\\Filter\\StringTrim::class) -&gt;attachByName(\\Laminas\\Filter\\StripTags::class); $csrf-&gt;getValidatorChain() -&gt;attachByName(\\Laminas\\Validator\\NotEmpty::class, [ 'message' =&gt; '&lt;b&gt;CSRF&lt;/b&gt; is required and cannot be empty', ], true) -&gt;attachByName(\\Laminas\\Session\\Validator\\Csrf::class, [ 'name' =&gt; 'exampleCsrf', 'message' =&gt; '&lt;b&gt;CSRF&lt;/b&gt; is invalid', 'session' =&gt; new \\Laminas\\Session\\Container(), ], true); $this-&gt;add($csrf); Replace exampleCsrf with the CSRF field's name in the form. Don't forget to modify both occurrences in this file. Make sure that you validate the form using its isValid method in the handler/controller where it is submitted. Render field Open the template that renders your form and add the following code somewhere between the form's opening and closing tags: {{ formElement(form.get('exampleCsrf')) }} Test the implementation Access your form from the browser and view its source. You should see a new hidden field, called exampleCsrf (or whatever name you used). After filling out the form, submitting it should work as before. In order to make sure that the new CSRF field works as expected, you can inspect the form using your browser's Developer tools and modify its value. Submitting a filled out form should result in a validation error: CSRF is required and cannot be empty Timeout Note the timeout option in your PHP form's exampleCsrf field, with its default value set to 3600 . This represents the value in seconds for how long the token is valid. Submitting a form that has been rendered for longer than this value will result in a validation error: **CSRF** is invalid You can modify the value of timeout in each form, but the default value should work in most cases.","title":"Set Up CSRF"},{"location":"v5/how-to/csrf/#csrf-protection-in-forms","text":"A Cross-Site Request Forgery (CSRF) attack is a type of security vulnerability that tricks a user into performing actions on a web application in which they are authenticated, without their knowledge or consent. Web applications can protect users against these types of attacks by implementing CSRF tokens in their forms which are known only to the application that generated them and must be included when submitting forms. With each visit, a new CSRF token is added to the form so tokens are not reusable between forms. Failing to provide a valid CSRF token will result in a form validation error.","title":"CSRF protection in forms"},{"location":"v5/how-to/csrf/#implement-csrf-protection","text":"Implementing CSRF protection requires three steps: create new field using laminas/laminas-form 's CSRF element validate new field using laminas/laminas-session 's CSRF validator render field using laminas/laminas-form 's FormElement helper","title":"Implement CSRF protection"},{"location":"v5/how-to/csrf/#test-the-implementation","text":"Access your form from the browser and view its source. You should see a new hidden field, called exampleCsrf (or whatever name you used). After filling out the form, submitting it should work as before. In order to make sure that the new CSRF field works as expected, you can inspect the form using your browser's Developer tools and modify its value. Submitting a filled out form should result in a validation error: CSRF is required and cannot be empty","title":"Test the implementation"},{"location":"v5/how-to/dependency-injection/","text":"Dependency Injection Dependency injection is a design pattern used in software development to implement inversion of control. In simpler terms, it's the act of providing dependencies for an object during instantiation. In PHP, dependency injection can be implemented in various ways, including through constructor injection, setter injection and property injection. Dotkernel Frontend, through its dot-dependency-injection package focuses only on constructor injection. Usage Dotkernel Frontend comes out of the box with the dot-dependency-injection package, which provides all the functionality injecting dependencies into any object you want. dot-dependency-injection determines the dependencies by looking at the #[Inject] attribute, added to the constructor of a class. Each dependency is specified as a separate parameter of the #[Inject] attribute. For our example we will inject UserService and config dependencies into a UserHandler . use Dot\\DependencyInjection\\Attribute\\Inject; class UserHandler implements RequestHandlerInterface { #[Inject( UserService::class, \"config\", )] public function __construct( protected UserServiceInterface $userService, protected array $config, ) { } } If your class needs the value of a specific configuration key, you can specify the path using dot notation: config.example The next step is to register the class in the ConfigProvider under factories using Dot\\DependencyInjection\\Factory\\AttributedServiceFactory::class . public function getDependencies(): array { return [ 'factories' =&gt; [ UserHandler::class =&gt; AttributedServiceFactory::class ] ]; } That's it. When your object is instantiated from the container, it will automatically have its dependencies resolved. Dependencies injection is available to any object within Dotkernel Frontend. For example, you can inject dependencies in a service, a handler and so on, simply by registering them in the ConfigProvider .","title":"Inject Dependencies"},{"location":"v5/how-to/dependency-injection/#dependency-injection","text":"Dependency injection is a design pattern used in software development to implement inversion of control. In simpler terms, it's the act of providing dependencies for an object during instantiation. In PHP, dependency injection can be implemented in various ways, including through constructor injection, setter injection and property injection. Dotkernel Frontend, through its dot-dependency-injection package focuses only on constructor injection.","title":"Dependency Injection"},{"location":"v5/how-to/dependency-injection/#usage","text":"Dotkernel Frontend comes out of the box with the dot-dependency-injection package, which provides all the functionality injecting dependencies into any object you want. dot-dependency-injection determines the dependencies by looking at the #[Inject] attribute, added to the constructor of a class. Each dependency is specified as a separate parameter of the #[Inject] attribute. For our example we will inject UserService and config dependencies into a UserHandler . use Dot\\DependencyInjection\\Attribute\\Inject; class UserHandler implements RequestHandlerInterface { #[Inject( UserService::class, \"config\", )] public function __construct( protected UserServiceInterface $userService, protected array $config, ) { } } If your class needs the value of a specific configuration key, you can specify the path using dot notation: config.example The next step is to register the class in the ConfigProvider under factories using Dot\\DependencyInjection\\Factory\\AttributedServiceFactory::class . public function getDependencies(): array { return [ 'factories' =&gt; [ UserHandler::class =&gt; AttributedServiceFactory::class ] ]; } That's it. When your object is instantiated from the container, it will automatically have its dependencies resolved. Dependencies injection is available to any object within Dotkernel Frontend. For example, you can inject dependencies in a service, a handler and so on, simply by registering them in the ConfigProvider .","title":"Usage"},{"location":"v5/how-to/npm_commands/","text":"NPM Commands To install dependencies into the node_modules directory run this command. npm install If npm install fails, this could be caused by user permissions of npm. The recommended way to install npm is through Node Version Manager . The watch command compiles the components then monitors the files for changes and recompiles them. npm run watch After all updates are done, this command compiles the assets locally, minifies them and makes them ready for production. npm run prod","title":"Use NPM Commands"},{"location":"v5/how-to/npm_commands/#npm-commands","text":"To install dependencies into the node_modules directory run this command. npm install If npm install fails, this could be caused by user permissions of npm. The recommended way to install npm is through Node Version Manager . The watch command compiles the components then monitors the files for changes and recompiles them. npm run watch After all updates are done, this command compiles the assets locally, minifies them and makes them ready for production. npm run prod","title":"NPM Commands"},{"location":"v5/installation/composer/","text":"Composer Installation of Packages Composer is required to install Dotkernel Frontend. You can install Composer from the official site . First make sure that you have navigated your command prompt to the folder where you copied the files in the previous step. Install dependencies Run this command in the command prompt. Use the CLI in order to ensure interactivity for proper configuration. composer install You should see this text below, along with a long list of packages to be installed instead of the [...] . In this example there are 158 packages, though the number can change in future updates. You will find the packages in the vendor folder. No composer.lock file present. Updating dependencies to latest instead of installing from lock file. See https://getcomposer.org/install for more information. Loading composer repositories with package information Updating dependencies Lock file operations: 158 installs, 0 updates, 0 removals [...] Writing lock file Installing dependencies from lock file (including require-dev) Package operations: 158 installs, 0 updates, 0 removals [...] The setup script prompts for some configuration settings, for example the lines below: Please select which config file you wish to inject 'Laminas\\Diactoros\\ConfigProvider' into: [0] Do not inject [1] config/config.php Make your selection (default is 1): Type 0 to select [0] Do not inject . We choose 0 because Dotkernel includes its own ConfigProvider which already contains the prompted configurations. If you choose [1] config/config.php , an extra ConfigProvider will be injected. The next question is: Remember this option for other packages of the same type? (y/N) Type y here, and hit enter to complete this stage. Development mode If you're installing the project for development, make sure you have development mode enabled, by running: composer development-enable You can disable development mode by running: composer development-disable You can check if you have development mode enabled by running: composer development-status","title":"Composer"},{"location":"v5/installation/composer/#composer-installation-of-packages","text":"Composer is required to install Dotkernel Frontend. You can install Composer from the official site . First make sure that you have navigated your command prompt to the folder where you copied the files in the previous step.","title":"Composer Installation of Packages"},{"location":"v5/installation/composer/#install-dependencies","text":"Run this command in the command prompt. Use the CLI in order to ensure interactivity for proper configuration. composer install You should see this text below, along with a long list of packages to be installed instead of the [...] . In this example there are 158 packages, though the number can change in future updates. You will find the packages in the vendor folder. No composer.lock file present. Updating dependencies to latest instead of installing from lock file. See https://getcomposer.org/install for more information. Loading composer repositories with package information Updating dependencies Lock file operations: 158 installs, 0 updates, 0 removals [...] Writing lock file Installing dependencies from lock file (including require-dev) Package operations: 158 installs, 0 updates, 0 removals [...] The setup script prompts for some configuration settings, for example the lines below: Please select which config file you wish to inject 'Laminas\\Diactoros\\ConfigProvider' into: [0] Do not inject [1] config/config.php Make your selection (default is 1): Type 0 to select [0] Do not inject . We choose 0 because Dotkernel includes its own ConfigProvider which already contains the prompted configurations. If you choose [1] config/config.php , an extra ConfigProvider will be injected. The next question is: Remember this option for other packages of the same type? (y/N) Type y here, and hit enter to complete this stage.","title":"Install dependencies"},{"location":"v5/installation/composer/#development-mode","text":"If you're installing the project for development, make sure you have development mode enabled, by running: composer development-enable You can disable development mode by running: composer development-disable You can check if you have development mode enabled by running: composer development-status","title":"Development mode"},{"location":"v5/installation/configuration-files/","text":"Configuration Files This step involves changing the names of or duplicating some of the .dist files in the project and editing their content to suit your project's requirements. Prepare config files Duplicate config/autoload/debugbar.local.php.dist as config/autoload/debugbar.local.php Duplicate config/autoload/development.local.php.dist as config/autoload/development.local.php Duplicate config/autoload/local.php.dist as config/autoload/local.php Duplicate config/autoload/mail.local.php.dist as config/autoload/mail.local.php Edit config/autoload/local.php according to your dev machine and fill in the database configuration. If you intend to send emails from your Frontend, make sure to fill in SMTP connection params. This will be covered in the next section. Optional : in order to run/create tests, duplicate config/autoload/local.test.php.dist as config/autoload/local.test.php . This creates a new in-memory database that your tests will run on. Mail If you want your application to send mails on registration, contact etc. add valid credentials to the following keys in config/autoload/mail.local.php Under message_options key: from - email address that will send emails (required) from_name - organization name for signing sent emails (optional) Under smtp_options key: host - hostname or IP address of the mail server (required) connection_config - add the username and password keys (required) In config/autoload/local.php edit the key contact =&gt; message_receivers =&gt; to with string values for emails that should receive contact messages. Please add at least 1 email address in order for contact message to reach someone Also feel free to add as many CCs as you require under the contact =&gt; message_receivers =&gt; cc key. reCAPTCHA reCAPTCHA is used to prevent abusive activities on your website. Dotkernel frontend uses the Google reCAPTCHA for its contact us form. Generate a siteKey and secretKey in your Google account: Google reCAPTCHA Update the recaptcha array in config/autoload/local.php with the siteKey and secretKey from Google reCAPTCHA. You need to whitelist localhost in the reCAPTCHA settings page during development. When in production do not forget to either remove localhost from the reCAPTCHA whitelist, or have a separate reCAPTCHA","title":"Configuration Files"},{"location":"v5/installation/configuration-files/#configuration-files","text":"This step involves changing the names of or duplicating some of the .dist files in the project and editing their content to suit your project's requirements.","title":"Configuration Files"},{"location":"v5/installation/configuration-files/#prepare-config-files","text":"Duplicate config/autoload/debugbar.local.php.dist as config/autoload/debugbar.local.php Duplicate config/autoload/development.local.php.dist as config/autoload/development.local.php Duplicate config/autoload/local.php.dist as config/autoload/local.php Duplicate config/autoload/mail.local.php.dist as config/autoload/mail.local.php Edit config/autoload/local.php according to your dev machine and fill in the database configuration. If you intend to send emails from your Frontend, make sure to fill in SMTP connection params. This will be covered in the next section. Optional : in order to run/create tests, duplicate config/autoload/local.test.php.dist as config/autoload/local.test.php . This creates a new in-memory database that your tests will run on.","title":"Prepare config files"},{"location":"v5/installation/configuration-files/#mail","text":"If you want your application to send mails on registration, contact etc. add valid credentials to the following keys in config/autoload/mail.local.php Under message_options key: from - email address that will send emails (required) from_name - organization name for signing sent emails (optional) Under smtp_options key: host - hostname or IP address of the mail server (required) connection_config - add the username and password keys (required) In config/autoload/local.php edit the key contact =&gt; message_receivers =&gt; to with string values for emails that should receive contact messages. Please add at least 1 email address in order for contact message to reach someone Also feel free to add as many CCs as you require under the contact =&gt; message_receivers =&gt; cc key.","title":"Mail"},{"location":"v5/installation/configuration-files/#recaptcha","text":"reCAPTCHA is used to prevent abusive activities on your website. Dotkernel frontend uses the Google reCAPTCHA for its contact us form. Generate a siteKey and secretKey in your Google account: Google reCAPTCHA Update the recaptcha array in config/autoload/local.php with the siteKey and secretKey from Google reCAPTCHA. You need to whitelist localhost in the reCAPTCHA settings page during development. When in production do not forget to either remove localhost from the reCAPTCHA whitelist, or have a separate reCAPTCHA","title":"reCAPTCHA"},{"location":"v5/installation/development-mode/","text":"Development mode Run this command to enable dev mode by turning debug flag to true and turning configuration caching to off . It will also make sure that any existing config cache is cleared. composer development-enable You should see this in the command prompt: &gt; laminas-development-mode enable You are now in development mode. If not already done, remove the .dist extension from config/autoload/development.local.php.dist .","title":"Development Mode"},{"location":"v5/installation/development-mode/#development-mode","text":"Run this command to enable dev mode by turning debug flag to true and turning configuration caching to off . It will also make sure that any existing config cache is cleared. composer development-enable You should see this in the command prompt: &gt; laminas-development-mode enable You are now in development mode. If not already done, remove the .dist extension from config/autoload/development.local.php.dist .","title":"Development mode"},{"location":"v5/installation/doctrine-orm/","text":"Doctrine ORM This step saves the database connection credentials in a Frontend configuration file. We do not cover the creation steps of the database itself. Setup database Create a new MySQL database and set its collation to utf8mb4_general_ci . Fill out the database credentials in config/autoload/local.php under $databases['default'] . Below is the item you need to focus on. my_database , my_user , my_password are provided only as an example. $databases = [ 'default' =&gt; [ 'host' =&gt; 'localhost', 'dbname' =&gt; 'my_database', 'user' =&gt; 'my_user', 'password' =&gt; 'my_password', 'port' =&gt; 3306, 'driver' =&gt; 'pdo_mysql', 'charset' =&gt; 'utf8mb4', 'collate' =&gt; 'utf8mb4_general_ci', ], // you can add more database connections into this array ]; Migrations Running the migrations is done with this command php vendor/bin/doctrine-migrations migrate Note: If you have already run the migrations, you may get this message. You should double-check to make sure the new migrations are ok to run. WARNING! You have x previously executed migrations in the database that are not registered migrations. {migration list} Are you sure you wish to continue? (y/n) When using an empty database, you will get this confirmation message instead. WARNING! You are about to execute a database migration that could result in schema changes and data loss. Are you sure you wish to continue? (y/n) Again, submit y to run all the migrations in chronological order. Each migration will be logged in the migrations table to prevent running the same migration more than once, which is often not desirable. If everything ran correctly, you will get this confirmation. [OK] Successfully migrated to version: Frontend\\Migrations\\Version20240806123413 The migration name Version20240806123413 may differ in future Frontend updates. Fixtures Run this command to populate the user_role table with the default values: php bin/doctrine fixtures:execute You should see our galloping horse in the command line. Executing Frontend\\Fixtures\\RoleLoader Fixtures have been loaded. .'' ._.-.___.' (`\\ //( ( `' '/ )\\ ).__. ) ' &lt;' `\\ ._/'\\ ` \\ \\","title":"Doctrine ORM"},{"location":"v5/installation/doctrine-orm/#doctrine-orm","text":"This step saves the database connection credentials in a Frontend configuration file. We do not cover the creation steps of the database itself.","title":"Doctrine ORM"},{"location":"v5/installation/doctrine-orm/#setup-database","text":"Create a new MySQL database and set its collation to utf8mb4_general_ci . Fill out the database credentials in config/autoload/local.php under $databases['default'] . Below is the item you need to focus on. my_database , my_user , my_password are provided only as an example. $databases = [ 'default' =&gt; [ 'host' =&gt; 'localhost', 'dbname' =&gt; 'my_database', 'user' =&gt; 'my_user', 'password' =&gt; 'my_password', 'port' =&gt; 3306, 'driver' =&gt; 'pdo_mysql', 'charset' =&gt; 'utf8mb4', 'collate' =&gt; 'utf8mb4_general_ci', ], // you can add more database connections into this array ];","title":"Setup database"},{"location":"v5/installation/doctrine-orm/#migrations","text":"Running the migrations is done with this command php vendor/bin/doctrine-migrations migrate Note: If you have already run the migrations, you may get this message. You should double-check to make sure the new migrations are ok to run. WARNING! You have x previously executed migrations in the database that are not registered migrations. {migration list} Are you sure you wish to continue? (y/n) When using an empty database, you will get this confirmation message instead. WARNING! You are about to execute a database migration that could result in schema changes and data loss. Are you sure you wish to continue? (y/n) Again, submit y to run all the migrations in chronological order. Each migration will be logged in the migrations table to prevent running the same migration more than once, which is often not desirable. If everything ran correctly, you will get this confirmation. [OK] Successfully migrated to version: Frontend\\Migrations\\Version20240806123413 The migration name Version20240806123413 may differ in future Frontend updates.","title":"Migrations"},{"location":"v5/installation/doctrine-orm/#fixtures","text":"Run this command to populate the user_role table with the default values: php bin/doctrine fixtures:execute You should see our galloping horse in the command line. Executing Frontend\\Fixtures\\RoleLoader Fixtures have been loaded. .'' ._.-.___.' (`\\ //( ( `' '/ )\\ ).__. ) ' &lt;' `\\ ._/'\\ ` \\ \\","title":"Fixtures"},{"location":"v5/installation/faq/","text":"Frequently Asked Questions How do I fix common permission issues? If running your project you encounter some permission issues, follow the below steps. Errors PHP Fatal error: Uncaught InvalidArgumentException: The directory \"/var/www/ example.local /html/data\" is not writable... PHP Fatal error: Uncaught InvalidArgumentException: The directory \"/var/www/ example.local /html/data/cache\" is not writable... PHP Fatal error: Uncaught InvalidArgumentException: The directory \"/var/www/ example.local /html/data/cache/doctrine\" is not writable... Fix: chmod -R 777 data Error PHP Fatal error: Uncaught InvalidArgumentException: The directory \"/var/www/ example.local /html/public/uploads\" is not writable... Fix: chmod -R 777 public/uploads Error PHP Fatal error: Uncaught ErrorException: fopen(/var/www/ example.local /config/autoload/../../log/error-log- yyyy-mm-dd.log ): Failed to open stream: Permission denied... Fix: chmod -R 777 log","title":"FAQ"},{"location":"v5/installation/faq/#frequently-asked-questions","text":"","title":"Frequently Asked Questions"},{"location":"v5/installation/faq/#how-do-i-fix-common-permission-issues","text":"If running your project you encounter some permission issues, follow the below steps.","title":"How do I fix common permission issues?"},{"location":"v5/installation/getting-started/","text":"Clone the project Recommended development environment If you are using Windows as OS on your machine, you can use WSL2 as development environment. Read more here: PHP-Mariadb-on-WLS2 Using your terminal, navigate inside the directory you want to download the project files into. Make sure that The directory is empty before proceeding to the download process. You will get this error if the directory is not empty fatal: destination path '.' already exists and is not an empty directory. and no files will be cloned. That you have writing permissions on the directory. Once there, run the following command: git clone https://github.com/dotkernel/frontend.git . If everything ran correctly, you can expect to see an output like this, though the numbers may differ. Cloning into '.'... remote: Enumerating objects: 6901, done. remote: Counting objects: 100% (795/795), done. remote: Compressing objects: 100% (343/343), done. remote: Total 6901 (delta 522), reused 478 (delta 449), pack-reused 6106 (from 1) Receiving objects: 100% (6901/6901), 3.83 MiB | 6.42 MiB/s, done. Resolving deltas: 100% (3868/3868), done. You can already open the project in your preferred IDE to double-check the files were copied correctly.","title":"Getting Started"},{"location":"v5/installation/getting-started/#clone-the-project","text":"","title":"Clone the project"},{"location":"v5/installation/getting-started/#recommended-development-environment","text":"If you are using Windows as OS on your machine, you can use WSL2 as development environment. Read more here: PHP-Mariadb-on-WLS2 Using your terminal, navigate inside the directory you want to download the project files into. Make sure that The directory is empty before proceeding to the download process. You will get this error if the directory is not empty fatal: destination path '.' already exists and is not an empty directory. and no files will be cloned. That you have writing permissions on the directory. Once there, run the following command: git clone https://github.com/dotkernel/frontend.git . If everything ran correctly, you can expect to see an output like this, though the numbers may differ. Cloning into '.'... remote: Enumerating objects: 6901, done. remote: Counting objects: 100% (795/795), done. remote: Compressing objects: 100% (343/343), done. remote: Total 6901 (delta 522), reused 478 (delta 449), pack-reused 6106 (from 1) Receiving objects: 100% (6901/6901), 3.83 MiB | 6.42 MiB/s, done. Resolving deltas: 100% (3868/3868), done. You can already open the project in your preferred IDE to double-check the files were copied correctly.","title":"Recommended development environment"},{"location":"v5/installation/installation-intro/","text":"Introduction In this tutorial, we will install Dotkernel Frontend from scratch. We will focus on these tasks: Highlight 3rd party tools required for the installation. Provide all the relevant commands with expected responses. Configure the development environment. Run the project. By the end of this tutorial you will have a fully-functional Dotkernel Frontend on your selected environment and can begin coding.","title":"Introduction"},{"location":"v5/installation/installation-intro/#introduction","text":"In this tutorial, we will install Dotkernel Frontend from scratch. We will focus on these tasks: Highlight 3rd party tools required for the installation. Provide all the relevant commands with expected responses. Configure the development environment. Run the project. By the end of this tutorial you will have a fully-functional Dotkernel Frontend on your selected environment and can begin coding.","title":"Introduction"},{"location":"v5/installation/running-application/","text":"Running the application We recommend running your applications in WSL: Make sure you have WSL installed on your system. Currently we provide a distro implementations for AlmaLinux 9 and AlmaLinux 10 Install the application in a virtualhost as recommended by the chosen distro. Set $baseUrl in config/autoload/local.php to the address of the virtualhost. Run the application by opening the virtualhost address in your browser. You should see the Dotkernel Frontend welcome page. If you are getting exceptions or errors regarding some missing services, try running the following command: sudo php bin/clear-config-cache.php If config-cache.php is present that config will be loaded regardless of the ConfigAggregator::ENABLE_CACHE in config/autoload/mezzio.global.php Development only : session.cookie_secure does not work locally so make sure you modify your local.php , as per the following: # other code return [ # other configurations... 'session_config' =&gt; [ 'cookie_secure' =&gt; false, ], ]; Do not change this in local.php.dist as well because this value should remain true on production.","title":"Running the Application"},{"location":"v5/installation/running-application/#running-the-application","text":"We recommend running your applications in WSL: Make sure you have WSL installed on your system. Currently we provide a distro implementations for AlmaLinux 9 and AlmaLinux 10 Install the application in a virtualhost as recommended by the chosen distro. Set $baseUrl in config/autoload/local.php to the address of the virtualhost. Run the application by opening the virtualhost address in your browser. You should see the Dotkernel Frontend welcome page. If you are getting exceptions or errors regarding some missing services, try running the following command: sudo php bin/clear-config-cache.php If config-cache.php is present that config will be loaded regardless of the ConfigAggregator::ENABLE_CACHE in config/autoload/mezzio.global.php Development only : session.cookie_secure does not work locally so make sure you modify your local.php , as per the following: # other code return [ # other configurations... 'session_config' =&gt; [ 'cookie_secure' =&gt; false, ], ]; Do not change this in local.php.dist as well because this value should remain true on production.","title":"Running the application"},{"location":"v5/introduction/file-structure/","text":"File structure Dotkernel Frontend follows the PSR-4 standards. It is considered good practice to standardize the file structure of projects. When using Dotkernel Frontend the following structure is installed by default: Special purpose folders .github - Contains workflow files .laminas-ci - Contains laminas-ci workflow files bin folder This folder contents are clear-config-cache.php - Removes the config cache file data/cache/config-cache.php ; available only when development mode is enabled doctrine - Used by the doctrine fixtures to populate the database tables doctrine-migrations - Used to create the database tables config folder This folder contains all application-related config files: cli-config.php - Command line interface configuration used by migrations, fixtures, crons config.php - Registers ConfigProviders for installing packages container.php - Main service container that provides access to all registered services development.config.php.dist - Activates debug mode; gets symlinked as development.config.php when enabling development mode migrations.php - Configuration for database migration, like migration file location and table to save the migration log pipeline.php - Contains a list of middlewares, in the order of their execution twig-cs-fixer.php - Configuration file for Twig code style checker/fixer config/autoload folder This folder contains all service-related local and global config files: app.global.php - Configures basic app variables authentication.global.php - Defines the User identity authorization.global.php - Configures permissions for user roles authorization-guards.global.php - Configures access per route for user roles cors.global.php - Configures Cross-Origin Resource Sharing, like call origin, headers, cookies dependencies.global.php - Config file to set global dependencies that should be accessible by all modules development.local.php.dist - Gets symlinked as development.local.php when enabling development mode; activates error handlers doctrine.global.php - Configuration used by Object–relational mapping error-handling.global.php - Configures and activates error logs local.php.dist - Local config file where you can overwrite application name and URL local.test.php.dist - Local configuration for functional tests mail.local.php.dist - Mail configuration; e.g. sendmail vs smtp, message configuration, mail logging mezzio.global.php - Mezzio core config file response-header.global.php - Defines headers per route session.global.php - Configures the session templates.global.php - dotkernel/dot-twigrenderer config file data folder This folder is a storage for project data files and service caches. It contains these folders: cache - Cache for e.g. Twig files doctrine - Database migrations and fixtures lock - Contains lock files generated by dotkernel/dot-cli AVOID storing sensitive data on the repository! log folder This folder stores daily log files. When you access the application from the browser, (if not already created) a new log file gets created in the format specified in the config/autoload/error-handling.global.php config file under the stream array key. public folder This folder contains all publicly available assets and serves as the entry point of the application: css and js - Contains the css and js file(s) generated by the webpack (npm) from the assets folder fonts and images - Contain the font and image file(s) copied by the webpack (npm) from the assets folder uploads - a folder that normally contains admin avatar images .htaccess - server configuration file used by Apache web server; it enables the URL rewrite functionality index.php - the application's main entry point robots.txt.dist - a sample robots.txt file that allows/denies bot access to certain areas of your application; activate it by duplicating the file as robots.txt and comment out the lines that don't match your environment src directory This folder contains a separate folder for each Module. These are the modules included by default: App - Core functionality, from authentication, to rendering, to error reporting Contact - Contains functionality for the contact us form Page - Contains functionality for displaying a page Plugin - Contains plugin functionality for dynamic forms and templates User - Contains functionality for users, from login and registering, to account management Module contents Each Module folder, in turn, should contain the following folders, unless they are empty: src/Controller - Action classes src/Entity - Used by database entities src/Repository - Entity repository folder src/Service - Service classes The above example is just some of the folders a project may include, but they should give you an idea about the recommended structure. Other classes the src folder may include are InputFilter , EventListener , Helper , Command , Factory etc. The src folder in each Module folder normally also contains these files: ConfigProvider.php - Configuration data for the module RoutesDelegator.php - Module specific route registrations templates directory for modules This directory contains the template files. twig is used as Templating Engine. All template files have the extension .html.twig .","title":"File Structure"},{"location":"v5/introduction/file-structure/#file-structure","text":"Dotkernel Frontend follows the PSR-4 standards. It is considered good practice to standardize the file structure of projects. When using Dotkernel Frontend the following structure is installed by default:","title":"File structure"},{"location":"v5/introduction/file-structure/#special-purpose-folders","text":".github - Contains workflow files .laminas-ci - Contains laminas-ci workflow files","title":"Special purpose folders"},{"location":"v5/introduction/file-structure/#bin-folder","text":"This folder contents are clear-config-cache.php - Removes the config cache file data/cache/config-cache.php ; available only when development mode is enabled doctrine - Used by the doctrine fixtures to populate the database tables doctrine-migrations - Used to create the database tables","title":"bin folder"},{"location":"v5/introduction/file-structure/#config-folder","text":"This folder contains all application-related config files: cli-config.php - Command line interface configuration used by migrations, fixtures, crons config.php - Registers ConfigProviders for installing packages container.php - Main service container that provides access to all registered services development.config.php.dist - Activates debug mode; gets symlinked as development.config.php when enabling development mode migrations.php - Configuration for database migration, like migration file location and table to save the migration log pipeline.php - Contains a list of middlewares, in the order of their execution twig-cs-fixer.php - Configuration file for Twig code style checker/fixer","title":"config folder"},{"location":"v5/introduction/file-structure/#data-folder","text":"This folder is a storage for project data files and service caches. It contains these folders: cache - Cache for e.g. Twig files doctrine - Database migrations and fixtures lock - Contains lock files generated by dotkernel/dot-cli AVOID storing sensitive data on the repository!","title":"data folder"},{"location":"v5/introduction/file-structure/#log-folder","text":"This folder stores daily log files. When you access the application from the browser, (if not already created) a new log file gets created in the format specified in the config/autoload/error-handling.global.php config file under the stream array key.","title":"log folder"},{"location":"v5/introduction/file-structure/#public-folder","text":"This folder contains all publicly available assets and serves as the entry point of the application: css and js - Contains the css and js file(s) generated by the webpack (npm) from the assets folder fonts and images - Contain the font and image file(s) copied by the webpack (npm) from the assets folder uploads - a folder that normally contains admin avatar images .htaccess - server configuration file used by Apache web server; it enables the URL rewrite functionality index.php - the application's main entry point robots.txt.dist - a sample robots.txt file that allows/denies bot access to certain areas of your application; activate it by duplicating the file as robots.txt and comment out the lines that don't match your environment","title":"public folder"},{"location":"v5/introduction/file-structure/#src-directory","text":"This folder contains a separate folder for each Module. These are the modules included by default: App - Core functionality, from authentication, to rendering, to error reporting Contact - Contains functionality for the contact us form Page - Contains functionality for displaying a page Plugin - Contains plugin functionality for dynamic forms and templates User - Contains functionality for users, from login and registering, to account management","title":"src directory"},{"location":"v5/introduction/introduction/","text":"Introduction Dotkernel Frontend is an application (skeleton) based on Mezzio microframework using Laminas components. It's designed as a web starter package suitable for frontend applications. The current functionality is included as a proof of concept and to showcase Frontend's file architecture: Contact us page Generic page with copy User accounts Use these building blocks as an example for your own custom code. Read on to find out more about the application: A technical overview to understand technical requirements and included packages A step-by-step installation guide to get you up and running in minutes Detailed how-tos for working with the current features Check out our demo .","title":"Introduction"},{"location":"v5/introduction/introduction/#introduction","text":"Dotkernel Frontend is an application (skeleton) based on Mezzio microframework using Laminas components. It's designed as a web starter package suitable for frontend applications. The current functionality is included as a proof of concept and to showcase Frontend's file architecture: Contact us page Generic page with copy User accounts Use these building blocks as an example for your own custom code. Read on to find out more about the application: A technical overview to understand technical requirements and included packages A step-by-step installation guide to get you up and running in minutes Detailed how-tos for working with the current features Check out our demo .","title":"Introduction"},{"location":"v5/introduction/packages/","text":"Packages dotkernel/dot-authorization - Authorization base package defining interfaces for authorization services to be used with Dotkernel applications dotkernel/dot-controller - Provides base classes for action based controllers similar to Laminas controller component dotkernel/dot-data-fixtures - Provides a CLI interface for listing &amp; executing doctrine data fixtures dotkernel/dot-dependency-injection - Dependency injection component using class attributes dotkernel/dot-errorhandler - Logging Error Handler for Middleware Applications dotkernel/dot-flashmessenger - Provides session messages between redirects dotkernel/dot-mail - Mail component based on laminas-mail dotkernel/dot-navigation - Allows you to easily define and parse menus inside templates, configuration based approach dotkernel/dot-rbac-guard - Defines authorization guards that authorize users for accessing certain parts of an application based on various criteria dotkernel/dot-response-header - Middleware for setting custom response headers dotkernel/dot-session - Dotkernel session component extending and customizing laminas-session dotkernel/dot-twigrenderer - Dotkernel component providing twig extensions and customizations friendsofphp/proxy-manager-lts - Fork of ocramius/proxy-manager laminas/laminas-component-installer - Composer plugin for injecting modules and configuration providers into application configuration laminas/laminas-config-aggregator - Lightweight library for collecting and merging configuration from different sources laminas/laminas-form - Bridge between your domain models and the View Layer laminas/laminas-i18n - Complete translation suite mezzio/mezzio - PSR-15 Middleware Microframework mezzio/mezzio-authorization-rbac - mezzio authorization rbac adapter for laminas/laminas-permissions-rbac mezzio/mezzio-cors - CORS component for Mezzio and other PSR-15 middleware runners mezzio/mezzio-fastroute - FastRoute integration for Mezzio ramsey/uuid-doctrine - Use ramsey/uuid as a Doctrine field type roave/psr-container-doctrine - Doctrine Factories for PSR-11 Containers","title":"Packages"},{"location":"v5/introduction/packages/#packages","text":"dotkernel/dot-authorization - Authorization base package defining interfaces for authorization services to be used with Dotkernel applications dotkernel/dot-controller - Provides base classes for action based controllers similar to Laminas controller component dotkernel/dot-data-fixtures - Provides a CLI interface for listing &amp; executing doctrine data fixtures dotkernel/dot-dependency-injection - Dependency injection component using class attributes dotkernel/dot-errorhandler - Logging Error Handler for Middleware Applications dotkernel/dot-flashmessenger - Provides session messages between redirects dotkernel/dot-mail - Mail component based on laminas-mail dotkernel/dot-navigation - Allows you to easily define and parse menus inside templates, configuration based approach dotkernel/dot-rbac-guard - Defines authorization guards that authorize users for accessing certain parts of an application based on various criteria dotkernel/dot-response-header - Middleware for setting custom response headers dotkernel/dot-session - Dotkernel session component extending and customizing laminas-session dotkernel/dot-twigrenderer - Dotkernel component providing twig extensions and customizations friendsofphp/proxy-manager-lts - Fork of ocramius/proxy-manager laminas/laminas-component-installer - Composer plugin for injecting modules and configuration providers into application configuration laminas/laminas-config-aggregator - Lightweight library for collecting and merging configuration from different sources laminas/laminas-form - Bridge between your domain models and the View Layer laminas/laminas-i18n - Complete translation suite mezzio/mezzio - PSR-15 Middleware Microframework mezzio/mezzio-authorization-rbac - mezzio authorization rbac adapter for laminas/laminas-permissions-rbac mezzio/mezzio-cors - CORS component for Mezzio and other PSR-15 middleware runners mezzio/mezzio-fastroute - FastRoute integration for Mezzio ramsey/uuid-doctrine - Use ramsey/uuid as a Doctrine field type roave/psr-container-doctrine - Doctrine Factories for PSR-11 Containers","title":"Packages"},{"location":"v5/introduction/server-requirements/","text":"Server Requirements For production, we highly recommend a *nix based system. Webserver Apache &gt;= 2.2 mod_rewrite .htaccess support (AllowOverride All) The repository includes a default .htaccess file in the public folder. Nginx You need to convert the provided Apache related .htaccess file into Nginx configuration instructions. PHP &gt;= 8.2 Both mod_php and FCGI (FPM) are supported. Required Settings and Modules &amp; Extensions memory_limit &gt;= 128M upload_max_filesize and post_max_size &gt;= 100M (depending on your data) mbstring CLI SAPI (for Cron Jobs) Composer (added to $PATH) RDBMS Tested with MariaDB 10.11 LTS and MariaDB 11.4 LTS Tested with MySQL 8.4 LTS For MySQL 8.4 LTS be sure you have the below line in my.cnf mysql_native_password=ON Recommended extensions opcache pdo_mysql or mysqli (if using MySQL or MariaDB as RDBMS) dom - if working with markup files structure (html, xml etc.) simplexml - working with xml files gd, exif - if working with images zlib, zip, bz2 - if compressing files curl (required if APIs are used) sqlite3 - for tests","title":"Server Requirements"},{"location":"v5/introduction/server-requirements/#server-requirements","text":"For production, we highly recommend a *nix based system.","title":"Server Requirements"},{"location":"v5/introduction/server-requirements/#webserver","text":"","title":"Webserver"},{"location":"v5/introduction/server-requirements/#php-82","text":"Both mod_php and FCGI (FPM) are supported.","title":"PHP &gt;= 8.2"},{"location":"v5/introduction/server-requirements/#required-settings-and-modules-extensions","text":"memory_limit &gt;= 128M upload_max_filesize and post_max_size &gt;= 100M (depending on your data) mbstring CLI SAPI (for Cron Jobs) Composer (added to $PATH)","title":"Required Settings and Modules &amp; Extensions"},{"location":"v5/introduction/server-requirements/#rdbms","text":"Tested with MariaDB 10.11 LTS and MariaDB 11.4 LTS Tested with MySQL 8.4 LTS For MySQL 8.4 LTS be sure you have the below line in my.cnf mysql_native_password=ON","title":"RDBMS"},{"location":"v5/introduction/server-requirements/#recommended-extensions","text":"opcache pdo_mysql or mysqli (if using MySQL or MariaDB as RDBMS) dom - if working with markup files structure (html, xml etc.) simplexml - working with xml files gd, exif - if working with images zlib, zip, bz2 - if compressing files curl (required if APIs are used) sqlite3 - for tests","title":"Recommended extensions"},{"location":"v5/reference/account-anonymization/","text":"Account anonymization Premise According to the GDPR, companies that record personal data from EU citizens must delete said data if its owner requests its deletion. An alternative is to anonymize the data, according to this article . Definition What is Personally identifiable information? According to this article , Personally identifiable information (PII) is: A name and surname. A home address. An email address such as name.surname@company.com. An identification card number. Location data (for example the location data function on a mobile phone). An Internet Protocol (IP) address. A cookie ID. The advertising identifier of your phone. A phone number. Data held by a hospital or doctor, which could be a symbol that uniquely identifies a person. Out of the box, Dotkernel Frontend saves the user's name (firstname and lastname) and email (identity). This personal data is used for emails related to password reset and account activation. Process Anonymization The anonymization process makes these replacements: The firstname and lastname are replaced with anonymous concatenated with the current UNIX timestamp, e.g. anonymous1725980747 . The email is replaced with anonymous concatenated with the current UNIX timestamp and the value in userAnonymizeAppend , e.g. anonymous1725980747@example.com . The avatar image and its database record are deleted. The userAnonymizeAppend key can be set in config/autoload/local.php or left empty. Using an email domain for userAnonymizeAppend would work as a catch-all email, if your email service provider has this option enabled.","title":"Anonymize Accounts"},{"location":"v5/reference/account-anonymization/#account-anonymization","text":"","title":"Account anonymization"},{"location":"v5/reference/account-anonymization/#premise","text":"According to the GDPR, companies that record personal data from EU citizens must delete said data if its owner requests its deletion. An alternative is to anonymize the data, according to this article .","title":"Premise"},{"location":"v5/reference/account-anonymization/#definition","text":"","title":"Definition"},{"location":"v5/reference/account-anonymization/#process","text":"","title":"Process"}]}